{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <title>Home</title>
</head>
<body>
    <div id="container-fluid container2">
        <header>
            <h4 class="title">Preço Médio</h4>
            <nav class="navbar navbar-light bg-light" id = "itens-navegacao">
                <div class="container-fluid">
                  <span class="navbar-text">
                    <button class="btn  btn-light btn-sm">Home</button>
                    <button class="btn  btn-light btn-sm">Histórico </button> 
                    <button class="btn btn-light btn-sm">Logar </button>
                    <button id="btn-sobre" class="btn btn-light btn-sm">Sobre</button>                    
                </div>
                  </span>               
              </nav>             
        </header>
        <div class="modal" id="modal-editar-produto" tabindex="-1">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5  class="modal-title">Editar produto</h5>
                <button type="button" class="btn-close fechar-modal" data-bs-dismiss="modal" aria-label="fechar"></button>
              </div>
              <div class="modal-body">
                  <form class="row g-3 align-items-center justify-content-center bg-light">
                      <div class="col-auto">
                        <div class="input-group">
                        <input type="text"  class="form-control" id="campo_loja" placeholder="Loja" > 
                      </div>
                        <div class="input-group">
                          <input type="text" class="form-control" id="campo_preco" placeholder="Preço">
                        </div>
                        <div class="input-group">
                          <input type="text" hidden class="form-control" id="campo_id" placeholder="id">
                        </div>
                        <div class="input-group">
                          <input type="text" hidden class="form-control" id="campo_data" placeholder="data">
                        </div>
                          <div class="input-group">
                            <input type="text" class="form-control" id="campo_descricao" placeholder="Descrição">
                          </div>
                        </div>                         
                    </form>
              </div>
              <div class="modal-footer">
                <button type="submit" id="editar-produto" class="btn btn-primary">Editar</button>
                <button type="button"  class="btn btn-secondary fechar-modal" data-bs-dismiss="modal">Fechar</button>
              </div>
            </div>
          </div>
        </div>
        <div class="modal" id="modal-adicionar-produto" tabindex="-1">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5  class="modal-title">Adicionar produto</h5>
                  <button type="button" class="btn-close fechar-modal" data-bs-dismiss="modal" aria-label="fechar"></button>
                </div>
                <div class="modal-body">
                    <form class="row g-3 align-items-center justify-content-center bg-light">
                        <div class="col-auto">
                          <label for="staticprodut" class="visually-hidden">Produto</label>
                          <input type="text" class="form-control" id="staticprodut" placeholder="Produto" >                          
                        </div>
                        <div class="col-auto">
                            <div class="input-group">
                              <input type="text" class="form-control" id="autoSizingInputGroup" placeholder="Palavras proibidas">
                            </div>
                          </div>    
                                              
                      </form>
                </div>
                <div class="modal-footer">
                  <button type="submit" id="salvar-produto" class="btn btn-primary">Salvar</button>
                  <button type="button"  class="btn btn-secondary fechar-modal" data-bs-dismiss="modal">Fechar</button>
                </div>
              </div>
            </div>
          </div>

        <div class="modal" id="modal-sobre" tabindex="-1">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5  class="modal-title">Sobre site</h5>
                  <button type="button" class="btn-close fechar-modal1" data-bs-dismiss="modal" aria-label="fechar"></button>
                </div>
                <div class="modal-body">
                  <p id="texto-sobre">Este trabalho foi desenvolvido pelos alunos  Allan, Lucas e Rodrigo que estudam na CEFET-RJ e 
                    fazem ciência da computação. Esse site tem com objetivo calcular os preço médios dos produtos através da utilização
                    de web scraping. O Web Scraping permite a coleta de dados em sites específicos e pode gerar insights valiosos
                    para o seu negócio. Essa espécie de “garimpo” da internet envolve extrair informações relevantes 
                    de determinado site para depois serem analisadas. Esses dados serão usados para aprimorar a tomada de decisões 
                    com maior chance de acerto e sucesso. É possível fazer o mesmo processo manualmente, mas quando se fala de Web
                     Scraping a ideia é automatizar o trabalho usando bots. Assim, é possível coletar um número muito maior de dados
                      em uma curta fração do tempo. 
                    </p>
                </div>
                <div class="modal-footer">
                  <button type="button"  class="btn btn-secondary fechar-modal1" data-bs-dismiss="modal">Fechar</button>
                </div>
              </div>
            </div>
          </div>            
        <div class="modal" id="modal-box-plot" tabindex="-1">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5  class="modal-title">Gráfico Boxplot</h5>
                <button type="button" class="btn-close fechar-modal1" data-bs-dismiss="modal" aria-label="fechar"></button>
              </div>
              <div class="modal-body d-flex align-items-center justify-content-center">
                <img  class="w-100 h-100 " src="{% static 'img/boxplot.png' %}" title="box plot" />
              </div>
              <div class="modal-footer">
                <a  href ="{% static 'img/boxplot.png' %}"  class="btn btn-success"  download>Dowload</a>
                <button type="button"  class="btn btn-secondary fechar-modal1" data-bs-dismiss="modal">Fechar</button>
              </div>
            </div>
          </div>
        </div>

        <section>
            <article>
                <form class="row gy-2 gx-3  align-items-center">
                    <div class="col-auto">
                        <button type="submit" id="btn-adicionar-produto" class="btn btn-success w-75 h-75">Adicionar Produto</button>        
                    </div>
                    <div class="col-auto">
                      <div class="input-group">
                        <input  type="text" class="form-control w-50" id="pesquisar_produto_home" placeholder="Descrição do produto">
                      </div>
                    </div>
                    <div class="col-auto">
                    <div class="col-auto">
                      <button id="enviar-produto-pesquisa" type="submit" class="btn btn-primary">Enviar Pesquisa</button>
                      <button id ="limpar-produto" type="submit" class="btn btn-danger">Limpar</button>
                    </div>
                    
                  </form>

            </article>
            <article id="table-home">
                <table class="table table-striped ">
                    <thead class="thead-dark">
                      <tr>
                        <th scope="col">Média</th>
                        <th scope="col">Moda</th>
                        <th scope="col">Mediana</th>
                        <th scope="col">Desvio Padrão</th>
                        <th scope="col">Variância</th>
                        <th scope="col">Menor valor</th>
                        <th scope="col">Maior valor</th>
                      </tr>
                    </thead> 
                    <tbody>
                      {% if  parametros_estatisticos %} 
                      <tr>
                        <th>{{parametros_estatisticos.media}}</th>
                        <td>{{parametros_estatisticos.moda}}</td>
                        <td>{{parametros_estatisticos.mediana}}</td>
                        <td>{{parametros_estatisticos.desvio_padrao}}</td>
                        <td>{{parametros_estatisticos.variancia}}</td>
                        <td>{{parametros_estatisticos.menor_valor_encontrado}}</td>
                        <td>{{parametros_estatisticos.maior_valor_encontrado}}</td> 
                        <td id="img-lixeira"  >
                          <img id="btn-box-plot"  src="{% static 'img/grafico.jpg' %}" alt="boxplot" title="box plot" /> 
                      </td>               
                      </tr>
                    {% else %}
                    <h5 class="h6 text-danger">Nenhum dado carregado</h5>
                    {% endif %} 
                    </tbody>
                  </table>

            </article>

            <article id="table-home">
              <table class="table table-striped ">
                  <thead class="thead-dark">
                    <tr>
                      <th scope="col">Id</th>
                      <th scope="col">Loja</th>
                      <th scope="col">Preço</th>
                      <th scope="col">Descrição</th>
                      <th scope="col">Data</th>
                      <th scope="col"></th>
                    </tr>
                  </thead> 
                  <tbody>
                    {% if  produtoEscolhido %} 
                  {% for prod in produtoEscolhido %}
                    <tr>
                      <th class="idProduto">{{prod.id}}</th>
                      <td>{{prod.lojaproduto}}</td>
                      <td>{{prod.valproduto}}</td>
                      <td>{{prod.descricaoproduto}}</td>
                      <td>{{prod.data}}</td>
                      <td id="img-lixeira"  >
                          <img title="editar produto" id ={{prod.id}} class="mx-3 btn-editar-produto" src="{% static 'img/editar.jpg' %}" alt="editar" /> 
                          <img title="excluir produto" id ={{prod.id}} class ="deletarProduto" src="{% static 'img/lixeira.jpg' %}" id="deletProduto" alt="excluir"/>
                      </td>
                    </tr>
                  {% endfor %}
                  <tr>
                    <td class="adicionar-historico"><button class="text-success border-warning btn btn-warning btn-sm">Adicionar ao histórico</button></td>
                  </tr>
                  {% else %}
                  <h5 class="h6 text-danger">Nenhum dado carregado</h5>
                  {% endif %} 
                  </tbody>
                </table>

          </article>

        </section>
    </div>
</div>  
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    <script src="{% static 'js/query.js' %}"></script>
    <script src="{% static 'js/script.js' %}"></script>
</body>
</html>